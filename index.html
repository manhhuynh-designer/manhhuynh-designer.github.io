<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="title">Mạnh Huỳnh - Graphic Designer | 3D Artist</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KFPG79L00S"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-KFPG79L00S');
    </script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for Social Media Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" xintegrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0PzGcVq/p/rW+9r/h/i6Qn/L1k/yG7CjY0sD4LwFpL+hL2gOQ2/yU2fJ+Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* CSS Variables for theming */
        :root { /* Night Mode Defaults (Blue + Black) */
            --color-bg-primary: #020617; /* slate-950 */
            --color-bg-secondary: #0f172a; /* slate-900 for section background gradient */
            --color-bg-card: #1e293b; /* slate-800 equivalent for cards/form */
            --color-text-main: #f8fafc; /* slate-50 */
            --color-text-heading: #3b82f6; /* blue-500 */
            --color-text-strong-accent: #60a5fa; /* blue-400 */
            --color-text-green-accent: #22c55e; /* green-500 */
            --color-button-primary: #3b82f6; /* blue-500 */
            --color-button-primary-hover: #2563eb; /* blue-600 */
            --color-border-main: #334155; /* slate-700 */
            --color-gray-text: #94a3b8; /* slate-400 */
            --color-medium-gray-text: #64748b; /* slate-600 */
            --color-hero-overlay-bg: rgba(0, 0, 0, 0.5); /* Glassmorphism effect base - Changed to 0.5 opacity */
            --color-link-primary: #3b82f6; /* blue-500 for links */
            --color-link-hover: #60a5fa; /* blue-400 for links hover */
            --color-shadow-card: 0 10px 15px -3px rgba(0,0,0,0.5), 0 4px 6px -2px rgba(0,0,0,0.2); /* Adjusted for dark mode */
            --color-gradient-from-1: #020617; /* slate-950 */
            --color-gradient-to-1: #0f172a; /* slate-900 */
            --color-gradient-from-2: #0f172a; /* slate-900 */
            --color-gradient-to-2: #020617; /* slate-950 */
            --color-header-gradient-from: #2563eb; /* blue-600 */
            --color-header-gradient-to: #1d4ed8; /* blue-700 */
            --color-button-border-color: #3b82f6; /* blue-500 */
            --color-button-text-secondary: #bfdbfe; /* blue-200 */
            --color-3d-object: #3b82f6; /* Three.js Blue - kept for consistency, but not used by 3D object anymore */
            --color-mobile-overlay-rgb: 2, 6, 23; /* RGB for rgba() from slate-950 */
            --color-header-glass-bg-blue: rgba(59, 130, 246, 0.6); /* blue-500 with 60% transparency for header glassmorphism (Dark Mode) */
            /* New color for skill tags */
            --color-skill-tag-bg: #475569; /* slate-700 for a muted grey tag */
        }

        body[data-theme='light'] { /* Light Mode Overrides (Blue + White) */
            --color-bg-primary: #ffffff; /* white */
            --color-bg-secondary: #f1f5f9; /* slate-100 */
            --color-bg-card: #ffffff; /* white */
            --color-text-main: #1e293b; /* slate-800 - dark blue-gray */
            --color-text-heading: #2563eb; /* blue-600 */
            --color-text-strong-accent: #1d4ed8; /* blue-700 */
            --color-text-green-accent: #16a34a; /* green-600 */
            --color-button-primary: #2563eb; /* blue-600 */
            --color-button-primary-hover: #1d4ed8; /* blue-700 */
            --color-border-main: #e2e8f0; /* slate-200 */
            --color-gray-text: #64748b; /* slate-600 */
            --color-medium-gray-text: #475569; /* slate-700 */
            --color-hero-overlay-bg: rgba(255, 255, 255, 0.5); /* Glassmorphism effect base - Changed to 0.5 opacity */
            --color-link-primary: #2563eb; /* blue-600 for links */
            --color-link-hover: #1d4ed8; /* blue-700 for links hover */
            --color-shadow-card: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); /* shadow-md */
            --color-gradient-from-1: #eff6ff; /* blue-50 */
            --color-gradient-to-1: #dbeafe; /* blue-100 */
            --color-gradient-from-2: #dbeafe; /* blue-100 */
            --color-gradient-to-2: #eff6ff; /* blue-50 */
            --color-header-gradient-from: #2563eb; /* blue-600 */
            --color-header-gradient-to: #1d4ed8; /* blue-700 */
            --color-button-border-color: #2563eb; /* blue-600 */
            --color-button-text-secondary: #2563eb; /* blue-600 */
            --color-3d-object: #3b82f6; /* Three.js Blue */
            --color-mobile-overlay-rgb: 255, 255, 255; /* RGB for rgba() from white */
            --color-header-glass-bg-blue: rgba(37, 99, 235, 0.8); /* blue-600 with 80% transparency for header glassmorphism (Light Mode) */
            /* New color for skill tags */
            --color-skill-tag-bg: #94a3b8; /* slate-400 for a muted grey tag */
        }

        /* Apply variables to base elements and sections */
        body {
            background-color: var(--color-bg-primary);
            color: var(--color-text-main);
            padding-top: 0; /* Handled by JS on load */
            /* Removed padding-left for body on mobile as sidebar is now overlay */
        }
        
        /* Removed @media (max-width: 767px) { body { padding-left: 3.5rem; } } */

        header {
            background-color: var(--color-header-glass-bg-blue); /* Changed to use blue glassmorphism variable */
            backdrop-filter: blur(10px); /* Glassmorphism effect */
            -webkit-backdrop-filter: blur(10px); /* Safari support */
            box-shadow: var(--color-shadow-header, 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05));
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border for glass look */
        }

        /* Explicitly set header logo and footer text color to white */
        header .text-main, /* Applies to Mạnh Huỳnh logo text */
        footer .text-main,
        footer p {
            color: #ffffff !important;
        }

        /* Desktop navigation links should be white */
        header nav ul li a { /* Targeting desktop nav links */
            color: #ffffff !important; /* Ensure they remain white against the header background */
        }

        footer {
            background: linear-gradient(to right, var(--color-header-gradient-from), var(--color-header-gradient-to));
            color: #ffffff; /* Fallback/explicit for clarity */
        }
        #home {
            background: linear-gradient(to bottom right, var(--color-gradient-from-1), var(--color-gradient-to-1));
        }
        #about, #services {
            background: linear-gradient(to bottom, var(--color-gradient-from-2), var(--color-gradient-to-2));
        }
        #portfolio, #contact {
            background: linear-gradient(to bottom, var(--color-gradient-from-1), var(--color-gradient-to-1));
        }

        /* Custom classes to replace direct Tailwind colors for dynamic theming */
        .bg-card { /* Replaces bg-gray-800 */
            background-color: var(--color-bg-card);
        }
        .text-main { /* Replaces text-white, text-gray-300 based on context */
            color: var(--color-text-main);
        }
        .text-heading { /* Replaces text-purple-400 */
            color: var(--color-text-heading);
        }
        .text-accent-strong { /* Replaces text-purple-300 */
            color: var(--color-text-strong-accent);
        }
        .text-accent-green { /* Replaces text-green-400 */
            color: var(--color-text-green-accent);
        }
        .text-gray-normal { /* Replaces text-gray-300 for general text */
            color: var(--color-gray-text);
        }
        .text-gray-medium { /* Replaces text-gray-400 */
            color: var(--color-medium-gray-text);
        }
        .bg-primary-button { /* Replaces bg-purple-600 */
            background-color: var(--color-button-primary);
        }
        .bg-primary-button:hover { /* Replaces hover:bg-purple-700 */
            background-color: var(--color-button-primary-hover);
        }
        .border-primary-button { /* Replaces border-purple-600 */
            border-color: var(--color-button-border-color);
        }

        /* Text color for primary buttons (always white) */
        button,
        .bg-primary-button,
        a.bg-primary-button {
            color: #ffffff !important;
        }

        /* Text color for secondary buttons (uses theme variable for initial color, white on hover) */
        .text-secondary-button-color {
            color: var(--color-button-text-secondary);
        }
        /* Specific rule for the hover effect for buttons with border-primary-button class */
        a.border-primary-button:hover {
            color: #ffffff !important; /* Force white text on hover */
        }

        .hover\:bg-primary-button:hover { /* Replaces hover:bg-purple-600 */
            background-color: var(--color-button-primary);
        }
        .hover\:text-white:hover { /* Replaces hover:text-white */
            color: #ffffff; /* Explicitly white for hover text on secondary button */
        }
        .link-primary { /* Replaces text-purple-400 for links */
            color: var(--color-link-primary);
        }
        .link-primary:hover { /* Replaces hover:text-purple-300 for links */
            color: var(--color-link-hover);
        }
        .border-main { /* Replaces border-gray-700, border-gray-600 */
            border-color: var(--color-border-main);
        }
        .bg-form-input { /* Replaces bg-gray-700 */
            background-color: var(--color-bg-card); /* Use card background for form inputs */
        }
        .focus\:border-primary-button:focus { /* Replaces focus:border-purple-500 */
            border-color: var(--color-button-primary);
        }
        .focus\:ring-primary-button:focus { /* Replaces focus:ring-purple-500 */
            --tw-ring-color: var(--color-button-primary);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }


        /* Hero overlay for Glassmorphism */
        #hero-text-content {
            background-color: var(--color-hero-overlay-bg);
            backdrop-filter: blur(10px); /* Glassmorphism effect */
            -webkit-backdrop-filter: blur(10px); /* Safari support */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border for glass look, fixed white for contrast */
        }

        /* Mobile toggle button and menu */
        #mobile-toggle {
            position: fixed;
            top: 50%; 
            left: 0;
            transform: translateY(-50%);
            background-color: var(--color-header-glass-bg-blue);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Center content vertically */
            transition: width 0.3s ease-in-out, height 0.3s ease-in-out, border-radius 0.3s ease-in-out;
            /* Border radius for initial collapsed state (half-circle) */
            border-top-right-radius: 9999px;
            border-bottom-right-radius: 9999px;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border for glass look */
        }

        /* Collapsed state */
        #mobile-toggle.collapsed {
            width: 40px; /* Tailwind w-10 */
            height: 80px; /* Adjust height for the half-circle with centered icon */
            padding: 0; /* Remove padding when collapsed */
            overflow: hidden; /* Hide menu items that exceed the toggle's height */
        }

        /* Expanded state */
        #mobile-toggle.expanded {
            width: 50px; /* Adjusted from 64px to 50px */
            height: auto; /* Allow content to dictate height */
            border-top-right-radius: 16px; /* rounded-xl */
            border-bottom-right-radius: 16px; /* rounded-xl */
            padding: 12px 0; /* py-3 px-0 */
            gap: 16px; /* space-y-4 for ul items + gap for main container */
        }

        /* Icon in toggle button */
        #mobile-toggle > i.fa-solid {
            color: #ffffff !important;
            font-size: 1.5rem; /* text-2xl from menu items */
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        /* Icon rotation */
        #mobile-toggle.collapsed > i.fa-solid {
            transform: rotate(0deg); /* points right */
        }
        #mobile-toggle.expanded > i.fa-solid {
            transform: rotate(180deg); /* points left */
        }

        /* Menu items within toggle */
        #mobile-toggle ul {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0; /* Remove default ul padding */
            margin: 0; /* Remove default ul margin */
        }

        /* Hide the UL content when collapsed */
        #mobile-toggle.collapsed ul {
            display: none; /* Crucial for ensuring only the arrow is visible and centered */
        }

        #mobile-toggle .menu-item {
            opacity: 0;
            pointer-events: none; /* Disable clicks when hidden */
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: translateX(-10px); /* Slight animation when appearing */
            margin-bottom: 24px; /* mb-6 equivalent, spacing between items */
        }
        /* Last item should not have margin-bottom */
        #mobile-toggle .menu-item:last-child {
            margin-bottom: 0;
        }

        #mobile-toggle.expanded .menu-item {
            opacity: 1;
            pointer-events: auto; /* Enable clicks when visible */
            transform: translateX(0);
        }

        /* Ensure all icons in the menu items are white */
        #mobile-toggle .menu-item a i {
            color: #ffffff !important;
        }

        /* Hide desktop nav on mobile */
        @media (max-width: 767px) {
            header nav ul.hidden.md\:flex {
                display: none;
            }
            #mobile-toggle {
                display: flex; /* Show mobile toggle on small screens */
            }
            /* Adjust header to prevent logo from being under the toggle when collapsed */
            header nav {
                padding-left: 0; /* Removed the 44px padding */
            }
        }
        @media (min-width: 768px) {
            #mobile-toggle {
                display: none; /* Hide mobile toggle on desktop */
            }
        }

        /* Custom Toggle Switch UI (Day/Night Mode) */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px; /* Width of the switch */
            height: 28px; /* Height of the switch */
            margin-right: 1rem; /* Spacing from language button */
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--color-bg-card); /* Background of the track */
            transition: .4s;
            border-radius: 28px; /* Rounded corners for the track */
            border: 2px solid var(--color-border-main); /* Border for the track */
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px; /* Height of the knob */
            width: 20px; /* Width of the knob */
            left: 4px; /* Initial position of the knob */
            bottom: 2px; /* Vertically center the knob */
            background-color: var(--color-button-primary); /* Color of the knob */
            transition: .4s;
            border-radius: 50%; /* Make the knob round */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            line-height: 1; /* For emoji/text centering */
        }

        input:checked + .slider {
            background-color: var(--color-bg-card); /* Background of the track when checked */
            border-color: var(--color-button-primary); /* Border color when checked */
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--color-button-primary);
        }

        input:checked + .slider:before {
            transform: translateX(20px); /* Move knob to the right when checked */
            background-color: var(--color-button-primary); /* Keep knob color consistent */
        }

        /* Emoji for knob */
        .slider.round:before {
            content: '🌙'; /* Moon for dark mode (default) */
            color: #ffffff; /* Explicitly white for icons in toggle switch */
        }

        input:checked + .slider.round:before {
            content: '☀️'; /* Sun for light mode */
            color: #ffffff; /* Explicitly white for icons in toggle switch */
        }

        /* Timeline specific styles */
        .timeline-container {
            position: relative;
            padding-left: 20px; /* Space for the vertical line */
        }

        .timeline-container::before {
            content: '';
            position: absolute;
            left: 10px; /* Position of the vertical line */
            top: 0;
            bottom: 0;
            width: 2px; /* Thickness of the line */
            background-color: var(--color-border-main); /* Color of the line */
            border-radius: 1px;
        }

        .timeline-item {
            position: relative;
            padding: 20px 0 20px 30px; /* Padding for content and space for dot */
            margin-left: -20px; /* Offset to align with the line */
            text-align: left; /* Ensure text aligns left */
            border-bottom: 1px solid var(--color-border-main); /* Separator between items */
        }

        .timeline-item:last-child {
            border-bottom: none; /* No border for the last item */
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 4px; /* Adjusted: Position of the dot (line + 3px offset for center) */
            top: 24px; /* Adjusted: Vertically center the dot */
            width: 12px; /* Increased Size of the dot */
            height: 12px; /* Increased Size of the dot */
            background-color: var(--color-button-primary); /* Color of the dot */
            border-radius: 50%;
            border: 2px solid var(--color-bg-card); /* Border around the dot, matching card background */
            z-index: 1; /* Ensure dot is above the line */
        }

        .timeline-item-date {
            font-size: 0.9rem;
            color: var(--color-gray-text);
            margin-bottom: 0.5rem;
            display: block; /* Ensures it takes full width for proper spacing */
            margin-top: -8px; /* Adjust to visually align with the dot */
        }
        .timeline-item-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 800; /* Changed from 600 to 800 for bolder */
            color: var(--color-accent-strong); /* Keep accent color */
            margin-bottom: 0.5rem;
        }
        .timeline-item-company {
            font-size: 1rem; /* text-md */
            color: var(--color-gray-medium);
            margin-bottom: 0.5rem;
        }
        .timeline-item-description {
            font-size: 1.125rem; /* text-lg */
            color: var(--color-gray-normal);
            list-style-type: disc; /* Ensure bullet points */
            margin-left: 1.25rem; /* Space for bullet points */
        }
        .timeline-item-description strong {
            color: var(--color-accent-green); /* Green accent for strong text in description */
        }

        /* Adjust padding for the timeline heading to align visually with the line */
        #about h3.text-main.mb-6 {
            margin-left: 20px; /* Align with timeline content */
        }

        /* Process Steps specific styles for horizontal layout and connectors */
        .process-steps-container {
            position: relative;
            z-index: 0;
            gap: 2rem; /* Consistent spacing between items */
        }

        .process-step {
            /* Basic styling is covered by Tailwind classes like flex-1, bg-card, p-6, rounded-xl, shadow-md, text-left, relative */
            /* Ensure enough padding for the arrow to not overlap content */
            padding-right: 3rem; /* Increase padding for potential arrow space */
        }

        .process-step:not(:last-child)::after {
            content: '\2192'; /* Right arrow character */
            position: absolute;
            top: 50%;
            right: -2rem; /* Adjust position based on gap, should be in the middle of the gap */
            transform: translateY(-50%);
            font-size: 2.5rem; /* Larger arrow for visibility */
            color: var(--color-text-heading); /* Match heading color */
            z-index: 1;
            pointer-events: none;
            display: none; /* Hidden by default on mobile */
        }

        /* Show arrow only on desktop and larger screens */
        @media (min-width: 768px) {
            .process-step:not(:last-child)::after {
                display: block;
            }
        }

        /* Services section: Dynamic styles for expand/collapse */
        /* REMOVED default display:flex and flex-direction from services-cards-container here,
           now handled by Tailwind grid classes in HTML directly. */
        #services-cards-container {
            width: 100%;
            gap: 2rem;
            transition: all 0.3s ease-in-out; /* Faster transition */
        }

        /* When a service is expanded, the container will change its layout for the single active card */
        #services-cards-container.services-expanded {
            display: flex; /* Override grid to flex for the expanded state */
            flex-direction: column; /* Stack on mobile, content within expanded card flows vertically */
            align-items: center; /* Center the expanded card horizontally */
            justify-content: center; /* Center the expanded card vertically */
            gap: 0; /* No gaps when only one card is active */
            width: 100%; /* Ensure container fills width */
            margin: 0 auto; /* Center the container itself */
        }
        /* No change needed here, as the flex-direction of the *expanded card* itself dictates the internal layout on desktop. */


        /* The active service card itself */
        .service-card {
            transition: all 0.3s ease-in-out; /* Faster transition */
            border: 1px solid var(--color-border-main);
            position: relative;
            /* REMOVED: padding: 2rem; (now handled by responsive Tailwind classes in HTML) */
            flex-shrink: 0;
            flex-grow: 1;
            width: 100%; /* Ensures it fills its grid cell or flex space */
        }

        .service-card.expanded {
            flex-grow: 0; /* Prevent stretching */
            flex-shrink: 0; /* Prevent shrinking */
            width: 100%; /* Occupy full width within #services-cards-container.services-expanded */
            max-width: 100%; /* Ensure it doesn't overflow */
            box-shadow: var(--color-shadow-card); /* Keep shadow */
            display: flex; /* Use flex for internal layout of expanded card */
            flex-direction: column; /* Default to column for mobile */
            align-items: flex-start; /* Align content to top */
            justify-content: flex-start; /* Align content to start */
            min-height: 500px; /* Ensure sufficient height for the layout */
        }

        /* Desktop layout for expanded card: content left, carousel right */
        @media (min-width: 768px) {
            .service-card.expanded {
                flex-direction: row; /* Content on left, carousel on right */
                align-items: stretch; /* Stretch children to fill height */
                gap: 2rem; /* Add a gap between the two halves of the expanded card */
            }
            .service-card.expanded .service-details-wrapper {
                flex: 1 1 50%; /* Take half width, flex-basis for explicit size */
                max-width: 50%; /* Ensure it doesn't grow beyond 50% */
                overflow-y: auto; /* Allow scrolling if content overflows */
                max-height: 100%; /* Limit height to parent */
            }
            .service-card.expanded .project-carousel-wrapper {
                flex: 1 1 50%; /* Take other half width, flex-basis for explicit size */
                max-width: 50%; /* Ensure it doesn't grow beyond 50% */
                padding-top: 0; /* No top padding if side-by-side */
                display: flex; /* Ensure it's flex for inner carousel layout */
                flex-direction: column; /* Ensure inner carousel layout */
            }
        }

        /* Hide other cards when one is expanded */
        #services-cards-container.services-expanded .service-card:not(.expanded) {
            opacity: 0;
            max-height: 0; /* Collapse height to zero */
            padding: 0;
            margin: 0;
            border: none;
            pointer-events: none; /* Disable interaction */
            transform: scale(0.8); /* Shrink slightly */
            overflow: hidden; /* Hide content */
            transition: all 0.3s ease-in-out; /* Faster transition */
        }

        /* Move toggle button to bottom-right */
        .toggle-details {
            bottom: 1rem;
            right: 1rem;
            top: auto;
            left: auto;
            transition: transform 0.2s ease-in-out; /* Faster icon transition */
            z-index: 10; /* Ensure icon is clickable */
        }

        /* Initial state of project carousel wrapper within card */
        .project-carousel-wrapper {
            opacity: 0;
            max-height: 0; /* Initially collapsed height for smooth transition */
            overflow: hidden;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: translateY(20px);
            display: flex; /* Keep display flex even when hidden, but rely on max-height/opacity */
            flex-direction: column; /* Ensure inner carousel layout */
            width: 100%; /* Take full width of parent within flex column */
        }

        /* Show when carousel is visible within an expanded service card */
        .project-carousel-wrapper.carousel-visible {
            opacity: 1;
            max-height: 600px; /* Sufficient height for visible content */
            transform: translateY(0);
            pointer-events: auto;
            padding-top: 1.5rem; /* Space between text and carousel on mobile */
            /* display: flex; already defined above */
        }

        /* Carousel specific styles */
        .carousel-container {
            aspect-ratio: 16/9;
            max-width: 100%;
            height: auto;
            background-color: var(--color-bg-secondary);
            border-radius: 0.75rem;
            position: relative; /* Needed for carousel inner positioning */
            overflow: hidden; /* Ensure images don't overflow rounded corners */
        }

        .carousel-inner {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease-in-out; /* Faster transition for carousel slide */
            position: absolute; /* Position within carousel-container */
            top: 0;
            left: 0;
        }

        .carousel-item {
            flex-shrink: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Changed to cover to fill the div */
            border-radius: 0.5rem;
        }

        /* Carousel Indicators */
        .carousel-indicators {
            position: absolute; /* Position them absolutely over the image */
            bottom: 1rem; /* 1rem from the bottom */
            right: 1rem; /* 1rem from the right */
            display: flex;
            justify-content: flex-end; /* Align indicators to the right */
            align-items: center;
            gap: 0.5rem; /* Equivalent to Tailwind space-x-2 */
            z-index: 20; /* Ensure they are above the image */
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background for readability */
            padding: 0.5rem 0.75rem; /* Padding around indicators */
            border-radius: 0.75rem; /* Rounded background */
        }

        .carousel-indicators span {
            width: 0.75rem; /* w-3 */
            height: 0.75rem; /* h-3 */
            background-color: var(--color-gray-medium); /* bg-gray-400 equivalent */
            border-radius: 9999px; /* rounded-full */
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }

        .carousel-indicators span.active {
            background-color: var(--color-button-primary); /* bg-blue-500 equivalent */
        }
        .fa-plus {
            padding-top: 1rem;

        }

        /* Portfolio specific styles (Moved from standalone and refined) */
        .project-thumbnail-container {
            position: relative;
            width: 100%;
            height: 256px; /* h-64 equivalent */
            overflow: hidden;
            border-radius: 0.75rem 0.75rem 0 0; /* rounded-xl on top */
            display: flex; /* For centering content if needed */
            justify-content: center;
            align-items: center;
        }

        .project-thumbnail-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease-in-out; /* Smooth transition for image changes */
            position: absolute; /* Stack images for fading */
            top: 0;
            left: 0;
            opacity: 0; /* Hidden by default */
        }

        .project-thumbnail-image.active {
            opacity: 1; /* Active image is visible */
        }

        .skill-tag {
            display: inline-block;
            background-color: var(--color-skill-tag-bg); /* Use new skill tag background color */
            color: #ffffff; /* White text for tags */
            font-size: 0.75rem; /* text-xs */
            padding: 0.25rem 0.6rem; /* px-2.5 py-1 */
            border-radius: 9999px; /* rounded-full */
            margin-right: 0.25rem; /* Reduced margin */
            margin-bottom: 0.25rem; /* Reduced margin */
            white-space: nowrap; /* Prevent breaking lines */
            transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }
        .skill-tag:hover {
            transform: translateY(-2px);
            /* Slightly darken on hover for interaction feedback */
            filter: brightness(1.1); 
        }

        .project-details-link-button {
            position: absolute;
            bottom: 1rem; /* 16px from bottom */
            right: 1rem; /* 16px from right */
            z-index: 20; /* Ensure it's above other elements if content overlaps */
        }

        /* Carousel Indicators for thumbnail */
        .thumbnail-indicators {
            position: absolute;
            bottom: 0.5rem; /* A bit higher than the button */
            left: 0.5rem;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 0.3rem; /* Smaller gap for compact look */
            z-index: 10;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
            padding: 0.3rem 0.5rem;
            border-radius: 9999px; /* Rounded pill shape */
        }

        .thumbnail-indicators span {
            width: 0.5rem; /* Smaller size */
            height: 0.5rem; /* Smaller size */
            background-color: var(--color-gray-text); /* Use gray text for inactive indicators */
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }

        .thumbnail-indicators span.active {
            background-color: var(--color-button-primary); /* Use primary button color for active indicator */
        }
    </style>
</head>
<body class="overflow-x-hidden" data-theme="dark">
    <!-- Header/Navigation -->
    <header class="shadow-lg py-4 px-6 md:px-12 fixed w-full z-50 rounded-b-lg top-0">
        <div class="flex items-center justify-between max-w-7xl mx-auto md:ml-auto md:mr-auto">
            <nav class="flex items-center justify-between w-full md:pl-0">
                <a href="#home" class="text-3xl font-bold text-main tracking-tight">Mạnh Huỳnh<span class="text-accent-strong">.</span></a>
                <ul class="hidden md:flex space-x-8">
                    <li><a href="#home" class="text-main hover:text-accent-strong transition duration-300 text-lg font-medium" data-lang-key="nav_home">Trang Chủ</a></li>
                    <li><a href="#about" class="text-main hover:text-accent-strong transition duration-300 text-lg font-medium" data-lang-key="nav_about">Giới Thiệu</a></li>
                    <li><a href="#portfolio" class="text-main hover:text-accent-strong transition duration-300 text-lg font-medium" data-lang-key="nav_portfolio">Dự Án</a></li>
                    <li><a href="#services" class="text-main hover:text-accent-strong transition duration-300 text-lg font-medium" data-lang-key="nav_services">Dịch Vụ</a></li>
                    <li><a href="#contact" class="text-main hover:text-accent-strong transition duration-300 text-lg font-medium" data-lang-key="nav_contact">Liên Hệ</a></li>
                </ul>
                <div class="flex flex-col sm:flex-row items-center md:space-x-4 space-y-2 sm:space-y-0">
                    <label class="switch" id="theme-toggle-label">
                        <input type="checkbox" id="theme-toggle-checkbox">
                        <span class="slider round"></span>
                    </label>
                    <button id="lang-toggle-button" class="bg-primary-button hover:bg-primary-button text-white font-bold py-2 px-4 rounded-full shadow-lg transition duration-300 transform hover:scale-105 text-sm">
                        EN
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Mobile Toggle Button and Menu -->
    <div id="mobile-toggle" class="md:hidden collapsed">
        <!-- Toggle Icon -->
        <i class="fa-solid fa-chevron-right text-2xl text-white"></i>

        <!-- Menu Items (hidden when collapsed) -->
        <ul class="mt-4 flex flex-col items-center">
            <li class="menu-item mb-6">
                <a href="#home" class="flex flex-col items-center text-white hover:text-white transition duration-300">
                    <i class="fa-solid fa-house text-2xl"></i>
                </a>
            </li>
            <li class="menu-item mb-6">
                <a href="#about" class="flex flex-col items-center text-white hover:text-white transition duration-300">
                    <i class="fa-solid fa-user text-2xl"></i>
                </a>
            </li>
            <li class="menu-item mb-6">
                <a href="#portfolio" class="flex flex-col items-center text-white hover:text-white transition duration-300">
                    <i class="fa-solid fa-palette text-2xl"></i>
                </a>
            </li>
            <li class="menu-item mb-6">
                <a href="#services" class="flex flex-col items-center text-white hover:text-white transition duration-300">
                    <i class="fa-solid fa-briefcase text-2xl"></i>
                </a>
            </li>
            <li class="menu-item">
                <a href="#contact" class="flex flex-col items-center text-white hover:text-white transition duration-300">
                    <i class="fa-solid fa-envelope text-2xl"></i>
                </a>
            </li>
        </ul>
    </div>

    <main>
        <!-- Home/Hero Section -->
        <section id="home" class="relative min-h-screen flex flex-col justify-center items-center text-center p-6 overflow-hidden">
            <!-- Replaced 3D container with video background -->
            <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover">
                <source src="assets/videos/cover.webm" type="video/webm">
                <!-- Fallback for browsers that don't support webm or video tag -->
                Your browser does not support the video tag.
            </video>
            <div id="hero-text-content" class="relative z-10 p-8 rounded-xl shadow-2xl scroll-reveal hero-text-parallax">
                <h1 class="text-5xl md:text-7xl font-extrabold text-main leading-tight mb-4 animate-fade-in-up">
                    Mạnh Huỳnh<span class="text-heading">.</span>
                </h1>
                <p class="text-2xl md:text-3xl text-secondary-button font-semibold mb-8 animate-fade-in-up delay-150" data-lang-key="hero_tagline">
                    Graphic Designer | 3D Artist
                </p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6 justify-center animate-fade-in-up delay-300">
                    <a href="#portfolio" class="bg-primary-button hover:bg-primary-button text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105" data-lang-key="hero_cta_portfolio">
                        Xem Portfolio
                    </a>
                    <a href="#contact" class="bg-transparent border-2 border-primary-button text-secondary-button-color hover:bg-primary-button hover:text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105" data-lang-key="hero_cta_contact">
                        Liên Hệ
                    </a>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-16 md:py-24 px-6 md:px-12 text-center">
            <div class="max-w-7xl mx-auto"> <!-- Changed from max-w-4xl -->
                <h2 class="text-4xl md:text-5xl font-extrabold text-heading mb-12 scroll-reveal" data-lang-key="about_heading">Giới Thiệu</h2>

                <div class="bg-card p-8 rounded-xl shadow-xl mb-12 scroll-reveal delay-150">
                    <h3 class="text-3xl font-bold text-main mb-6" data-lang-key="about_greeting">Chào bạn, tôi là Mạnh.</h3>
                    <p class="text-lg text-gray-normal leading-relaxed" data-lang-key="about_intro_paragraph">
                        Tôi là Mạnh Huỳnh, một 3D Motion Graphic Designer với hơn <strong class="text-accent-strong">5 năm kinh nghiệm</strong> trong lĩnh vực thiết kế đồ họa và sản xuất nội dung số. Tôi chuyên thực hiện video sản phẩm CGI, đặc biệt là các chiến dịch Fake OOH (CGI FOOH) – kết hợp hình ảnh 3D với môi trường thực.<br><br>
                        Bên cạnh đó, tôi có nhiều kinh nghiệm trong việc sản xuất video 3D ngắn giới thiệu sản phẩm, dựng và render hình ảnh sản phẩm chất lượng cao, cũng như thiết kế các ấn phẩm như POSM, bao bì, key visual phục vụ cho các chiến dịch truyền thông đa kênh.<br><br>
                        Tôi là một người tư duy sáng tạo và đổi mới, và tôi luôn tìm kiếm những cách thức mới để sử dụng thiết kế nhằm giải quyết vấn đề và truyền đạt ý tưởng một cách rõ ràng và hiệu quả.
                    </p>
                </div>

                <!-- Experience -->
                <div class="bg-card p-8 rounded-xl shadow-xl mb-12 scroll-reveal delay-600">
                    <h3 class="text-3xl font-bold text-main mb-6" data-lang-key="experience_heading">Kinh Nghiệm Làm Việc</h3>
                    <div class="timeline-container">
                        <!-- Freelance -->
                        <div class="timeline-item scroll-reveal delay-150">
                            <p class="timeline-item-date" data-lang-key="exp_freelance_date">Tháng 4 năm 2025 - Hiện tại</p>
                            <h4 class="timeline-item-title" data-lang-key="exp_freelance_title">Freelance | Graphic Designer | 3D Artist</h4>
                            <ul class="timeline-item-description space-y-1">
                                <li data-lang-key="exp_freelance_desc1"><strong class="text-accent-green">3D Product Visualization & Animation:</strong> Mô hình hóa, đổ bóng, chiếu sáng, và hoạt hình sản phẩm chân thực sử dụng Blender & Cycles CGI cho các chiến dịch kỹ thuật số.</li>
                                <li data-lang-key="exp_freelance_desc2">Kể chuyện bằng hình ảnh cho các sản phẩm chăm sóc da, trang điểm và chăm sóc cá nhân.</li>
                                <li data-lang-key="exp_freelance_desc3"><strong class="text-accent-green">Motion Design & Compositing:</strong> Đồ họa chuyển động 2D/3D, chuyển cảnh, và hiệu ứng sản phẩm sử dụng After Effects.</li>
                                <li data-lang-key="exp_freelance_desc4">Graphic & Visual Design: Tài sản sáng tạo cho tiếp thị kỹ thuật số, mạng xã hội, và thương mại điện tử (Photoshop, Illustrator).</li>
                            </ul>
                        </div>
                        <!-- L'Oréal -->
                        <div class="timeline-item scroll-reveal delay-300">
                            <p class="timeline-item-date" data-lang-key="exp_loreal_date">Tháng 7 năm 2022 - Tháng 4 năm 2025</p>
                            <h4 class="timeline-item-title" data-lang-key="exp_loreal_title">L'Oréal | Senior E-Designer</h4>
                            <ul class="timeline-item-description space-y-1">
                                <li data-lang-key="exp_loreal_desc1">Thiết kế nội dung và tài sản kỹ thuật số hấp dẫn về hình ảnh cho các chiến dịch và khuyến mãi trực tuyến.</li>
                                <li data-lang-key="exp_loreal_desc2">Hợp tác với các team để tạo visual e-commerce hiệu quả và thẩm mỹ.</li>
                                <li data-lang-key="exp_loreal_desc3">Phát triển concept và thiết kế cho các nền tảng mạng xã hội.</li>
                                <li data-lang-key="exp_loreal_desc4">Sử dụng phần mềm 3D để đẩy nhanh quy trình thiết kế và tạo quảng cáo CGI.</li>
                            </ul>
                        </div>
                        <!-- Soul Specialty Coffee -->
                        <div class="timeline-item scroll-reveal delay-450">
                            <p class="timeline-item-date" data-lang-key="exp_soulcoffee_date">Tháng 4 năm 2021 - Tháng 5 năm 2022</p>
                            <h4 class="timeline-item-title" data-lang-key="exp_soulcoffee_title">Soul Specialty Coffee | Graphic Designer</h4>
                            <ul class="timeline-item-description space-y-1">
                                <li data-lang-key="exp_soulcoffee_desc1">Thiết kế bao bì hiệu quả chi phí và hấp dẫn về hình ảnh cho các sản phẩm thương mại khác nhau.</li>
                                <li data-lang-key="exp_soulcoffee_desc2">Tạo quảng cáo, báo cáo và tài liệu thương hiệu để hỗ trợ các nỗ lực tiếp thị của công ty.</li>
                                <li data-lang-key="exp_soulcoffee_desc3">Hợp tác với các thành viên trong nhóm về cả các dự án thiết kế quy mô lớn và nhỏ hơn.</li>
                                <li data-lang-key="exp_soulcoffee_desc4">Giám sát hiệu suất in ấn và duy trì kiểm soát chất lượng in.</li>
                            </ul>
                        </div>
                        <!-- Loyal District LTd.co -->
                        <div class="timeline-item scroll-reveal delay-600">
                            <p class="timeline-item-date" data-lang-key="exp_loyal_date">Tháng 3 năm 2019 - Tháng 5 năm 2020</p>
                            <h4 class="timeline-item-title" data-lang-key="exp_loyal_title">Loyal District LTd.co | Graphic Designer</h4>
                            <ul class="timeline-item-description space-y-1">
                                <li data-lang-key="exp_loyal_desc1">Thiết kế mẫu mockup áo thun và đồng phục cho cả sản xuất nội bộ và tùy chỉnh của khách hàng.</li>
                                <li data-lang-key="exp_loyal_desc2">Quản lý và hướng dẫn thực tập sinh trong bộ phận thiết kế.</li>
                                <li data-lang-key="exp_loyal_desc3">Tạo quảng cáo, báo cáo và tài liệu thương hiệu để nâng cao nhận diện thương hiệu của công ty.</li>
                                <li data-lang-key="exp_loyal_desc4">Hợp tác với nhóm trong các dự án thiết kế và tiến hành tư vấn khách hàng.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Software Section -->
                <div class="bg-card p-8 rounded-xl shadow-xl mb-12 scroll-reveal delay-150">
                    <h3 class="text-3xl font-bold text-main mb-6" data-lang-key="software_heading">Software mà tôi sử dụng</h3>
                    <div class="flex flex-wrap justify-center items-center gap-6">
                        <!-- Adobe Photoshop -->
                        <div class="flex flex-col items-center text-center">
                            <img src="assets/images/Adobe_Photoshop_CC.png" alt="Adobe Photoshop" class="rounded-lg mb-2 w-16 h-16">
                            <span class="text-sm text-gray-normal">Photoshop</span>
                        </div>
                        <!-- Adobe Illustrator -->
                        <div class="flex flex-col items-center text-center">
                            <img src="assets/images/Adobe_Illustrator_CC.png" alt="Adobe Illustrator" class="rounded-lg mb-2 w-16 h-16">
                            <span class="text-sm text-gray-normal">Illustrator</span>
                        </div>
                        <!-- Adobe After Effects -->
                        <div class="flex flex-col items-center text-center">
                            <img src="assets/images/Adobe_After_Effects_CC.png" alt="Adobe After Effects" class="rounded-lg mb-2 w-16 h-16">
                            <span class="text-sm text-gray-normal">After Effects</span>
                        </div>
                        <!-- Blender 3D -->
                        <div class="flex flex-col items-center text-center">
                            <img src="assets/images/Blender_icon.png" alt="Blender 3D" class="rounded-lg mb-2 w-16 h-16">
                            <span class="text-sm text-gray-normal">Blender 3D</span>
                        </div>
                        <!-- AI Tools -->
                        <div class="flex flex-col items-center text-center">
                            <img src="assets/images/AI_icon.png" alt="AI Tools" class="rounded-lg mb-2 w-16 h-16">
                            <span class="text-sm text-gray-normal">AI Tools</span>
                        </div>
                    </div>
                </div>

                <!-- Work Process Section -->
                <h3 class="text-3xl font-bold text-main mb-6 scroll-reveal delay-150" data-lang-key="work_process_heading">Quy Trình Làm Việc</h3>
                <div class="flex flex-col md:flex-row md:space-x-8 space-y-8 md:space-y-0 items-stretch justify-center process-steps-container">
                    <!-- Step 1 -->
                    <div class="flex-1 bg-card p-6 rounded-xl shadow-md text-left relative process-step scroll-reveal-x delay-150">
                        <div class="text-4xl text-accent-strong mb-4">💡</div>
                        <h4 class="text-xl font-semibold text-main mb-2" data-lang-key="work_process_step1_title">1. Tiếp nhận & Phân tích Yêu cầu</h4>
                        <p class="text-gray-normal text-md" data-lang-key="work_process_step1_short_desc">Lắng nghe và hiểu rõ mục tiêu dự án.</p>
                    </div>
                    <!-- Step 2 -->
                    <div class="flex-1 bg-card p-6 rounded-xl shadow-md text-left relative process-step scroll-reveal-x delay-300">
                        <div class="text-4xl text-accent-strong mb-4">✏️</div>
                        <h4 class="text-xl font-semibold text-main mb-2" data-lang-key="work_process_step2_title">2. Lên ý tưởng & Phát triển Concept</h4>
                        <p class="text-gray-normal text-md" data-lang-key="work_process_step2_short_desc">Phác thảo ý tưởng và tạo moodboard.</p>
                    </div>
                    <!-- Step 3 -->
                    <div class="flex-1 bg-card p-6 rounded-xl shadow-md text-left relative process-step scroll-reveal-x delay-450">
                        <div class="text-4xl text-accent-strong mb-4">⚙️</div>
                        <h4 class="text-xl font-semibold text-main mb-2" data-lang-key="work_process_step3_title">3. Triển khai & Tối ưu</h4>
                        <p class="text-gray-normal text-md" data-lang-key="work_process_step3_short_desc">Thiết kế hoàn chỉnh, tinh chỉnh hiệu suất.</p>
                    </div>
                    <!-- Step 4 -->
                    <div class="flex-1 bg-card p-6 rounded-xl shadow-md text-left relative process-step scroll-reveal-x delay-600">
                        <div class="text-4xl text-accent-strong mb-4">📦</div>
                        <h4 class="text-xl font-semibold text-main mb-2" data-lang-key="work_process_step4_title">4. Giao nhận & Hỗ trợ</h4>
                        <p class="text-gray-normal text-md" data-lang-key="work_process_step4_short_desc">Bàn giao sản phẩm và hỗ trợ sau dự án.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section (Integrated and Dynamic) -->
        <section id="portfolio" class="py-16 md:py-24 px-6 md:px-12 text-center">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-extrabold text-heading mb-12 scroll-reveal" data-lang-key="portfolio_heading">Dự Án Nổi Bật</h2>
                <div id="portfolio-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Project cards will be dynamically inserted here by JavaScript -->
                </div>
                <div class="mt-12">
                    <a href="https://www.behance.net/manhhuynh323b3" target="_blank" rel="noopener noreferrer"
                       class="bg-primary-button hover:bg-primary-button text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105"
                       data-lang-key="portfolio_view_all_projects">
                        Xem Tất Cả Dự Án
                    </a>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="py-16 md:py-24 px-6 md:px-12 text-center">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-extrabold text-heading mb-12 scroll-reveal" data-lang-key="services_heading">Dịch Vụ Cung Cấp</h2>
                <div id="services-cards-container" class="w-full grid grid-cols-1 md:grid-cols-3 gap-8 transition-all duration-300 ease-in-out">
                    <!-- Video CGI FOOH Production -->
                    <div id="service-fooh" class="bg-card p-4 sm:p-6 md:p-8 rounded-xl shadow-xl text-left relative service-card scroll-reveal">
                        <div class="absolute bottom-4 right-4 cursor-pointer text-xl text-heading toggle-details" data-service-id="service-fooh">
                            <i class="fa-solid fa-plus"></i>
                        </div>
                        <div class="service-details-wrapper">
                            <h3 class="text-3xl font-bold text-main mb-4" data-lang-key="service_fooh_title">Sản xuất Video CGI FOOH</h3>
                            <ul class="list-disc list-inside text-lg text-gray-normal space-y-2">
                                <li data-lang-key="service_fooh_desc"><strong class="text-accent-green">Sản xuất các video quảng cáo CGI ngắn (15-30 giây)</strong> cho các chiến dịch truyền thông.</li>
                            </ul>
                        </div>
                        <div class="project-carousel-wrapper">
                            <div class="carousel-container relative w-full h-full min-h-[300px] overflow-hidden flex items-center justify-center bg-secondary rounded-xl">
                                <div class="carousel-inner flex w-full h-full transition-transform duration-300 ease-in-out">
                                    <!-- Project images will be dynamically added here -->
                                </div>
                                <div class="carousel-indicators"></div>
                            </div>
                        </div>
                    </div>
                    <!-- 3D Modeling & Animation -->
                    <div id="service-3d-modeling-animation" class="bg-card p-4 sm:p-6 md:p-8 rounded-xl shadow-xl text-left relative service-card scroll-reveal delay-150">
                        <div class="absolute bottom-4 right-4 cursor-pointer text-xl text-heading toggle-details" data-service-id="service-3d-modeling-animation">
                            <i class="fa-solid fa-plus"></i>
                        </div>
                        <div class="service-details-wrapper">
                            <h3 class="text-3xl font-bold text-main mb-4" data-lang-key="service_3d_modeling_animation_title">Mô hình hóa & Hoạt hình 3D</h3>
                            <ul class="list-disc list-inside text-lg text-gray-normal space-y-2">
                                <li data-lang-key="service_3d_modeling_animation_desc1"><strong class="text-accent-strong">Mô hình hóa sản phẩm 3D</strong> chi tiết từ bản vẽ hoặc ý tưởng.</li>
                                <li data-lang-key="service_3d_modeling_animation_desc2"><strong class="text-accent-strong">Render hình ảnh sản phẩm 3D</strong> chất lượng cao, chân thực.</li>
                                <li data-lang-key="service_3d_modeling_animation_desc3"><strong class="text-accent-strong">Sản xuất video quảng cáo 3D CGI</strong> cho sản phẩm.</li>
                            </ul>
                        </div>
                        <div class="project-carousel-wrapper">
                            <div class="carousel-container relative w-full h-full min-h-[300px] overflow-hidden flex items-center justify-center bg-secondary rounded-xl">
                                <div class="carousel-inner flex w-full h-full transition-transform duration-300 ease-in-out">
                                    <!-- Project images will be dynamically added here -->
                                </div>
                                <div class="carousel-indicators"></div>
                            </div>
                        </div>
                    </div>
                    <!-- 2D Design -->
                    <div id="service-2d-design" class="bg-card p-4 sm:p-6 md:p-8 rounded-xl shadow-xl text-left relative service-card scroll-reveal delay-300">
                        <div class="absolute bottom-4 right-4 cursor-pointer text-xl text-heading toggle-details" data-service-id="service-2d-design">
                            <i class="fa-solid fa-plus"></i>
                        </div>
                        <div class="service-details-wrapper">
                            <h3 class="text-3xl font-bold text-main mb-4" data-lang-key="service_2d_design_title">Thiết kế 2D</h3>
                            <ul class="list-disc list-inside text-lg text-gray-normal space-y-2">
                                <li data-lang-key="service_2d_design_desc1"><strong class="text-accent-strong">Thiết kế cho thương mại điện tử</strong> (e-commerce).</li>
                                <li data-lang-key="service_2d_design_desc2"><strong class="text-accent-strong">Thiết kế bao bì sản phẩm.</strong></li>
                                <li data-lang-key="service_2d_design_desc3">POSM Design.</li>
                                <li data-lang-key="service_2d_design_desc4">Các dịch vụ thiết kế 2D khác theo yêu cầu.</li>
                            </ul>
                        </div>
                        <div class="project-carousel-wrapper">
                            <div class="carousel-container relative w-full h-full min-h-[300px] overflow-hidden flex items-center justify-center bg-secondary rounded-xl">
                                <div class="carousel-inner flex w-full h-full transition-transform duration-300 ease-in-out">
                                    <!-- Project images will be dynamically added here -->
                                </div>
                                <div class="carousel-indicators"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-16 md:py-24 px-6 md:px-12 text-center">
            <div class="max-w-4xl mx-auto"> <!-- Changed from max-w-xl -->
                <h2 class="text-4xl md:text-5xl font-extrabold text-heading mb-12 scroll-reveal" data-lang-key="contact_heading">Liên Hệ</h2>
                <p class="text-lg text-gray-normal mb-8 scroll-reveal delay-150" data-lang-key="contact_tagline">
                    Sẵn sàng đưa ý tưởng của bạn thành hiện thực? Hãy gửi tin nhắn cho tôi!
                </p>

                <form id="contact-form" action="https://formspree.io/f/mkgbganj" method="POST" class="bg-card p-8 rounded-xl shadow-xl text-left space-y-6 scroll-reveal delay-300">
                    <div>
                        <label for="name" class="block text-main text-lg font-semibold mb-2" data-lang-key="contact_name_label">Tên của bạn:</label>
                        <input type="text" id="name" name="name" required
                               class="w-full p-3 rounded-lg bg-form-input text-main border border-main focus:border-primary-button focus:ring focus:ring-primary-button focus:ring-opacity-50 transition duration-200"
                               data-lang-key="contact_name_placeholder" placeholder="Tên của bạn">
                    </div>
                    <div>
                        <label for="email" class="block text-main text-lg font-semibold mb-2" data-lang-key="contact_email_label">Email của bạn:</label>
                        <input type="email" id="email" name="email" required
                               class="w-full p-3 rounded-lg bg-form-input text-main border border-main focus:border-primary-button focus:ring focus:ring-primary-button focus:ring-opacity-50 transition duration-200"
                               data-lang-key="contact_email_placeholder" placeholder="Email của bạn">
                    </div>
                    <div>
                        <label for="subject" class="block text-main text-lg font-semibold mb-2" data-lang-key="contact_subject_label">Chủ đề:</label>
                        <input type="text" id="subject" name="subject"
                               class="w-full p-3 rounded-lg bg-form-input text-main border border-main focus:border-primary-button focus:ring focus:ring-primary-button focus:ring-opacity50 transition duration-200"
                               data-lang-key="contact_subject_placeholder" placeholder="Chủ đề">
                    </div>
                    <div>
                        <label for="message" class="block text-main text-lg font-semibold mb-2" data-lang-key="contact_message_label">Tin nhắn:</label>
                        <textarea id="message" name="message" rows="5" required
                                  class="w-full p-3 rounded-lg bg-form-input text-main border border-main focus:border-primary-button focus:ring focus:ring-primary-button focus:ring-opacity-50 transition duration-200"
                                  data-lang-key="contact_message_placeholder" placeholder="Tin nhắn"></textarea>
                    </div>
                    <!-- Hidden input to specify reply-to email for Formspree -->
                    <input type="hidden" name="_replyto" value="contact@manhhuynh.work">
                    <button type="submit"
                            class="w-full bg-primary-button hover:bg-primary-button text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105"
                            data-lang-key="contact_submit_button">
                        Gửi Tin Nhắn
                    </button>
                    <div id="form-message" class="mt-4 text-center text-accent-green font-semibold hidden" data-lang-key="contact_form_success"></div>
                </form>

                <div class="mt-12 scroll-reveal delay-450">
                    <p class="text-xl font-semibold text-main mb-4" data-lang-key="contact_or_connect">Hoặc kết nối qua:</p>
                    <!-- Contact links: Email, Website, Phone/Zalo -->
                    <div class="flex flex-wrap justify-center items-center gap-x-8 gap-y-4 text-lg mb-6">
                        <a href="mailto:contact@manhhuynh.work" class="link-primary hover:link-primary transition duration-300 flex items-center">
                            <i class="fa-solid fa-envelope mr-2"></i>
                            contact@manhhuynh.work
                        </a>
                        <a href="https://manhhuynh.work" target="_blank" rel="noopener noreferrer" class="link-primary hover:link-primary transition duration-300 flex items-center">
                            <i class="fa-solid fa-globe mr-2"></i>
                            manhhuynh.work
                        </a>
                        <a href="https://zalo.me/84359312806" target="_blank" rel="noopener noreferrer" class="link-primary hover:link-primary transition duration-300 flex items-center">
                            <img src="assets\images\Zalo_logo.svg" alt="Zalo" class="mr-2" style="width: 1.25em; height: 1.25em; display: inline-block; vertical-align: middle;">
                            (+84) 359312806
                        </a>
                    </div>
                    <!-- Social media icons -->
                    <div class="flex flex-wrap justify-center items-center gap-6 text-2xl">
                        <a href="https://www.tiktok.com/@manhhuynh.designer" target="_blank" rel="noopener noreferrer" class="link-primary hover:link-primary transition duration-300">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="https://www.instagram.com/manh.des.98" target="_blank" rel="noopener noreferrer" class="link-primary hover:link-primary transition duration-300">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.behance.net/manhhuynh323b3" target="_blank" rel="noopener noreferrer" class="link-primary hover:link-primary transition duration-300">
                            <i class="fab fa-behance"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/manh-huynh-designer1" target="_blank" rel="noopener noreferrer" class="link-primary hover:link-primary transition duration-300">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                    <p class="text-xl font-semibold text-main mt-6" data-lang-key="contact_location">Địa điểm: Thành phố Hồ Chí Minh, Việt Nam</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="py-8 px-6 md:px-12 text-center rounded-t-lg">
        <p data-lang-key="footer_copyright">&copy; 2025 Mạnh Huỳnh. Tất cả quyền được bảo lưu.</p>
    </footer>

    <script>
        // Language data
        const languages = {
            'vi': {
                'title': 'Mạnh Huỳnh - Graphic Designer | 3D Artist',
                'nav_home': 'Trang Chủ',
                'nav_about': 'Giới Thiệu',
                'nav_portfolio': 'Dự Án',
                'nav_services': 'Dịch Vụ',
                'nav_contact': 'Liên Hệ',
                'nav_home_mobile': 'Trang Chủ', // Duplicated for mobile menu
                'nav_about_mobile': 'Giới Thiệu',
                'nav_portfolio_mobile': 'Dự Án',
                'nav_services_mobile': 'Dịch Vụ',
                'nav_contact_mobile': 'Liên Hệ',
                'hero_tagline': 'Graphic Designer | 3D Artist',
                'hero_cta_portfolio': 'Xem Portfolio',
                'hero_cta_contact': 'Liên Hệ',
                'about_heading': 'Giới Thiệu',
                'about_greeting': 'Chào bạn, tôi là Mạnh.',
                'about_intro_paragraph': 'Tôi là Mạnh Huỳnh, một 3D Motion Graphic Designer với hơn <strong class="text-accent-strong">5 năm kinh nghiệm</strong> trong lĩnh vực thiết kế đồ họa và sản xuất nội dung số. Tôi chuyên thực hiện video sản phẩm CGI, đặc biệt là các chiến dịch Fake OOH (CGI FOOH) – kết hợp hình ảnh 3D với môi trường thực.<br><br>Bên cạnh đó, tôi có nhiều kinh nghiệm trong việc sản xuất video 3D ngắn giới thiệu sản phẩm, dựng và render hình ảnh sản phẩm chất lượng cao, cũng như thiết kế các ấn phẩm như POSM, bao bì, key visual phục vụ cho các chiến dịch truyền thông đa kênh.<br><br>Tôi là một người tư duy sáng tạo và đổi mới, và tôi luôn tìm kiếm những cách thức mới để sử dụng thiết kế nhằm giải quyết vấn đề và truyền đạt ý tưởng một cách rõ ràng và hiệu quả.',
                'software_heading': 'Software mà tôi sử dụng', // New key
                'work_process_heading': 'Quy Trình Làm Việc',
                'work_process_step1_title': '1. Tiếp nhận & Phân tích Yêu cầu',
                'work_process_step1_short_desc': 'Lắng nghe và hiểu rõ mục tiêu dự án.', // New short description
                'work_process_step2_title': '2. Lên ý tưởng & Phát triển Concept',
                'work_process_step2_short_desc': 'Phác thảo ý tưởng và tạo moodboard.',
                'work_process_step3_title': '3. Triển khai & Tối ưu',
                'work_process_step3_short_desc': 'Thiết kế hoàn chỉnh, tinh chỉnh hiệu suất.',
                'work_process_step4_title': '4. Giao nhận & Hỗ trợ',
                'work_process_step4_short_desc': 'Bàn giao sản phẩm và hỗ trợ sau dự án.',
                'experience_heading': 'Kinh Nghiệm Làm Việc',
                'exp_freelance_title': 'Freelance | Graphic Designer | 3D Artist',
                'exp_freelance_date': 'Tháng 4 năm 2025 - Hiện tại',
                'exp_freelance_desc1': '<strong class="text-accent-green">3D Product Visualization & Animation:</strong> Mô hình hóa, đổ bóng, chiếu sáng, và hoạt hình sản phẩm chân thực sử dụng Blender & Cycles CGI cho các chiến dịch kỹ thuật số.',
                'exp_freelance_desc2': 'Kể chuyện bằng hình ảnh cho các sản phẩm chăm sóc da, trang điểm và chăm sóc cá nhân.',
                'exp_freelance_desc3': '<strong class="text-accent-green">Motion Design & Compositing:</strong> Đồ họa chuyển động 2D/3D, chuyển cảnh, và hiệu ứng sản phẩm sử dụng After Effects.',
                'exp_freelance_desc4': 'Graphic & Visual Design: Tài sản sáng tạo cho tiếp thị kỹ thuật số, mạng xã hội, và thương mại điện tử (Photoshop, Illustrator).',
                'exp_loreal_title': 'L\'Oréal | Senior E-Designer',
                'exp_loreal_date': 'Tháng 7 năm 2022 - Tháng 4 năm 2025',
                'exp_loreal_desc1': 'Thiết kế nội dung và tài sản kỹ thuật số hấp dẫn về hình ảnh cho các chiến dịch và khuyến mãi trực tuyến.',
                'exp_loreal_desc2': 'Hợp tác với các team để tạo visual e-commerce hiệu quả và thẩm mỹ.',
                'exp_loreal_desc3': 'Phát triển concept và thiết kế cho các nền tảng mạng xã hội.',
                'exp_loreal_desc4': 'Sử dụng phần mềm 3D để đẩy nhanh quy trình thiết kế và tạo quảng cáo CGI.',
                'exp_soulcoffee_title': 'Soul Specialty Coffee | Graphic Designer',
                'exp_soulcoffee_date': 'Tháng 4 năm 2021 - Tháng 5 năm 2022',
                'exp_soulcoffee_desc1': 'Thiết kế bao bì hiệu quả chi phí và hấp dẫn về hình ảnh cho các sản phẩm thương mại khác nhau.',
                'exp_soulcoffee_desc2': 'Tạo quảng cáo, báo cáo và tài liệu thương hiệu để hỗ trợ các nỗ lực tiếp thị của công ty.',
                'exp_soulcoffee_desc3': 'Hợp tác với các thành viên trong nhóm về cả các dự án thiết kế quy mô lớn và nhỏ hơn.',
                'exp_soulcoffee_desc4': 'Giám sát hiệu suất in ấn và duy trì kiểm soát chất lượng in.',
                'exp_loyal_title': 'Loyal District LTd.co | Graphic Designer',
                'exp_loyal_date': 'Tháng 3 năm 2019 - Tháng 5 năm 2020',
                'exp_loyal_desc1': 'Thiết kế mẫu mockup áo thun và đồng phục cho cả sản xuất nội bộ và tùy chỉnh của khách hàng.',
                'exp_loyal_desc2': 'Quản lý và hướng dẫn thực tập sinh trong bộ phận thiết kế.',
                'exp_loyal_desc3': 'Tạo quảng cáo, báo cáo và tài liệu thương hiệu để nâng cao nhận diện thương hiệu của công ty.',
                'exp_loyal_desc4': 'Hợp tác với nhóm trong các dự án thiết kế và tiến hành tư vấn khách hàng.',
                'portfolio_heading': 'Dự Án Nổi Bật',
                'portfolio_view_all_projects': 'Xem Tất Cả Dự Án',
                'footer_copyright': '&copy; 2025 Mạnh Huỳnh. Tất cả quyền được bảo lưu.',
                // Project specific translations (matching portfolioProjects data)
                'project_maybelline_lifter_title': 'Maybelline LIFTER GLOSS - Thiết kế POSM & Digital',
                'project_maybelline_lifter_desc': 'Thiết kế các tài liệu POSM và nội dung kỹ thuật số sáng tạo cho chiến dịch quảng cáo của Maybelline Lifter Gloss.',



                'project_maybelline_lifter_skills': 'Thiết kế đồ họa, POSM',
                'project_cgi_fooh_title': 'Bộ sưu tập Video CGI FOOH 2024',
                'project_cgi_fooh_desc': 'Tổng hợp các video quảng cáo Fake Out Of Home (FOOH) sử dụng CGI sáng tạo, thu hút sự chú ý trên mạng xã hội.',
                'project_cgi_fooh_skills': 'CGI, Video Animation, VFX',
                'project_dove_tvc_title': 'TVC Sản phẩm Dove Deodorant Night Serum',
                'project_dove_tvc_desc': 'Phát triển TVC quảng cáo sản phẩm Dove Deodorant Night Serum với hình ảnh 3D và hiệu ứng chuyển động mượt mà.',
                'project_dove_tvc_skills': '3D Animation, Product Visualization, TVC',
                'project_aeon_tet_title': 'Tết Chọn Aeon: Tết Vui trọn Vẹn',
                'project_aeon_tet_desc': 'Sản xuất video quảng cho chiến dịch Tết của Aeon, kết hợp tạo hình mascot 3D và cảnh quay 3 miền Việt Nam.',
                'project_aeon_tet_skills': 'VFX, 3D Animation',
                'project_maybelline_lazmall_title': 'Maybelline LazMall BSL - Key Visual & Shop-in-Shop',
                'project_maybelline_lazmall_desc': 'Thiết kế key visual và trải nghiệm shop-in-shop cho Maybelline trên nền tảng LazMall, tối ưu hóa giao diện mua sắm trực tuyến.',
                'project_maybelline_lazmall_skills': 'E-commerce Design, Key Visual',
                'project_coffee_illustration_title': 'Minh họa quy trình cà phê - Soul Specialty Coffee',
                'project_coffee_illustration_desc': 'Tạo bộ minh họa độc đáo về quy trình chế biến cà phê cho Soul Specialty Coffee, kể câu chuyện từ hạt đến tách.',
                'project_coffee_illustration_skills': 'Minh họa, Branding, Packaging',
                'project_details_link': 'Xem chi tiết dự án &rarr;',
                'services_heading': 'Dịch Vụ Cung Cấp',
                // Updated service keys
                'service_fooh_title': 'Sản xuất Video CGI FOOH',
                'service_fooh_desc': 'Sản xuất các video quảng cáo CGI ngắn (15-30 giây) cho các chiến dịch truyền thông.',
                'service_3d_modeling_animation_title': 'Mô hình hóa & Hoạt hình 3D',
                'service_3d_modeling_animation_desc1': 'Mô hình hóa sản phẩm 3D chi tiết từ bản vẽ hoặc ý tưởng.',
                'service_3d_modeling_animation_desc2': 'Render hình ảnh sản phẩm 3D chất lượng cao, chân thực.',
                'service_3d_modeling_animation_desc3': 'Sản xuất video quảng cáo 3D CGI cho sản phẩm.',
                'service_2d_design_title': 'Thiết kế 2D',
                'service_2d_design_desc1': 'Thiết kế cho thương mại điện tử (e-commerce).',
                'service_2d_design_desc2': 'Thiết kế bao bì sản phẩm.',
                'service_2d_design_desc3': 'POSM Design.',
                'service_2d_design_desc4': 'Các dịch vụ thiết kế 2D khác theo yêu cầu.',
                'contact_heading': 'Liên Hệ', // Corrected Vietnamese translation
                'contact_tagline': 'Sẵn sàng đưa ý tưởng của bạn thành hiện thực? Hãy gửi tin nhắn cho tôi!',
                'contact_name_label': 'Tên của bạn:',
                'contact_name_placeholder': 'Tên của bạn',
                'contact_email_label': 'Email của bạn:',
                'contact_email_placeholder': 'Email của bạn',
                'contact_subject_label': 'Chủ đề:',
                'contact_subject_placeholder': 'Chủ đề',
                'contact_message_label': 'Tin nhắn:',
                'contact_message_placeholder': 'Tin nhắn',
                'contact_submit_button': 'Gửi Tin Nhắn',
                'contact_form_success': 'Cảm ơn bạn đã liên hệ! Tin nhắn của bạn đã được gửi.',
                'contact_or_connect': 'Hoặc kết nối qua:',
                'contact_location': 'Địa điểm: Thành phố Hồ Chí Minh, Việt Nam'
            },
            'en': {
                'title': 'Manh Huynh - Graphic Designer | 3D Artist',
                'nav_home': 'Home',
                'nav_about': 'About',
                'nav_portfolio': 'Portfolio',
                'nav_services': 'Services',
                'nav_contact': 'Contact',
                'nav_home_mobile': 'Home',
                'nav_about_mobile': 'About',
                'nav_portfolio_mobile': 'Portfolio',
                'nav_services_mobile': 'Services',
                'nav_contact_mobile': 'Contact',
                'hero_tagline': 'Graphic Designer | 3D Artist',
                'hero_cta_portfolio': 'View Portfolio',
                'hero_cta_contact': 'Contact Me',
                'about_heading': 'About',
                'about_greeting': 'Hello, I\'m Manh.',
                'about_intro_paragraph': 'I am Manh Huỳnh, a 3D Motion Graphic Designer with over <strong class="text-accent-strong">5 years of experience</strong> in graphic design and digital content production. I specialize in CGI product videos, especially Fake OOH (CGI FOOH) campaigns – blending 3D visuals with real environments.<br><br>In addition, I have extensive experience producing short 3D product introduction videos, building and rendering high-quality product images, as well as designing materials such as POSM, packaging, and key visuals for multi-channel communication campaigns.<br><br>I am a creative and innovative thinker, always seeking new ways to use design to solve problems and communicate ideas clearly and effectively.',
                'software_heading': 'Software I Use', // New key
                'work_process_heading': 'Work Process',
                'work_process_step1_title': '1. Requirement Reception & Analysis',
                'work_process_step1_short_desc': 'Listen and understand project goals.',
                'work_process_step2_title': '2. Ideation & Concept Development',
                'work_process_step2_short_desc': 'Sketch ideas and create moodboards.',
                'work_process_step3_title': '3. Implementation & Optimization',
                'work_process_step3_short_desc': 'Finalize design, optimize performance.',
                'work_process_step4_title': '4. Delivery & Support',
                'work_process_step4_short_desc': 'Deliver product and post-project support.',
                'experience_heading': 'Work Experience',
                'exp_freelance_title': 'Freelance | Graphic Designer | 3D Artist',
                'exp_freelance_date': 'April 2025 - Present',
                'exp_freelance_desc1': '<strong class="text-accent-green">3D Product Visualization & Animation:</strong> Realistic product modeling, shading, lighting, and animation using Blender & Cycles CGI for digital campaigns.',
                'exp_freelance_desc2': 'Visual storytelling for skincare, makeup, and personal care products.',
                'exp_freelance_desc3': '<strong class="text-accent-green">Motion Design & Compositing:</strong> 2D/3D motion graphics, transitions, and product effects using After Effects.',
                'exp_freelance_desc4': 'Graphic & Visual Design: Creative assets for digital marketing, social media, and e-commerce (Photoshop, Illustrator).',
                'exp_loreal_title': 'L\'Oréal | Senior E-Designer',
                'exp_loreal_date': 'July 2022 - April 2025',
                'exp_loreal_desc1': 'Designed visually appealing digital content and assets for online campaigns and promotions.',
                'exp_loreal_desc2': 'Collaborated with teams to create effective and aesthetic e-commerce visuals.',
                'exp_loreal_desc3': 'Developed concepts and designs for social media platforms.',
                'exp_loreal_desc4': 'Utilized 3D software to accelerate design processes and create CGI advertisements.',
                'exp_soulcoffee_title': 'Soul Specialty Coffee | Graphic Designer',
                'exp_soulcoffee_date': 'April 2021 - May 2022',
                'exp_soulcoffee_desc1': 'Designed cost-effective and visually appealing packaging for various commercial products.',
                'exp_soulcoffee_desc2': 'Created advertisements, reports, and branding materials to support the company\'s marketing efforts.',
                'exp_soulcoffee_desc3': 'Collaborated with team members on both large-scale and smaller design projects.',
                'exp_soulcoffee_desc4': 'Oversaw printing performance and maintained print quality control.',
                'exp_loyal_title': 'Loyal District LTd.co | Graphic Designer',
                'exp_loyal_date': 'March 2019 - May 2020',
                'exp_loyal_desc1': 'Designed mockup samples of t-shirts and uniforms for both in-house production and customer customization.',
                'exp_loyal_desc2': 'Managed and guided interns in the design department.',
                'exp_loyal_desc3': 'Created advertisements, reports, and branding materials to enhance the company\'s visual identity.',
                'exp_loyal_desc4': 'Collaborated with the team on design projects and conducted customer consultations.',
                'portfolio_heading': 'Featured Projects',
                'portfolio_view_all_projects': 'View All Projects',
                'footer_copyright': '&copy; 2025 Manh Huynh. All rights reserved.',
                // Project specific translations (matching portfolioProjects data)
                'project_maybelline_lifter_title': 'Maybelline LIFTER GLOSS - POSM & Digital Design',
                'project_maybelline_lifter_desc': 'Designed creative POSM materials and digital content for Maybelline Lifter Gloss advertising campaigns.',
                'project_maybelline_lifter_skills': 'Graphic Design, POSM',
                'project_cgi_fooh_title': '2024 CGI Fake OOH videos collection',
                'project_cgi_fooh_desc': 'Compilation of creative Fake Out Of Home (FOOH) advertising videos using CGI, attracting attention on social media.',
                'project_cgi_fooh_skills': 'CGI, Video Animation, VFX',
                'project_dove_tvc_title': 'Dove Deodorant Night Serum Product TVC',
                'project_dove_tvc_desc': 'Developed an advertising TVC for Dove Deodorant Night Serum with 3D visuals and smooth motion effects.',
                'project_dove_tvc_skills': '3D Animation, Product Visualization, TVC',
                'project_aeon_tet_title': 'Aeon Tet Market: Joyful Tet Across the Land',
                'project_aeon_tet_desc': 'Production of a promotional video for Aeon\'s Tet campaign, combining 3D mascot animation and footage from three regions of Vietnam.',
                'project_aeon_tet_skills': 'VFX, 3D Animation',
                'project_maybelline_lazmall_title': 'Maybelline LazMall BSL - Key Visual & Shop-in-Shop',
                'project_maybelline_lazmall_desc': 'Designed key visuals and shop-in-shop experiences for Maybelline on the LazMall platform, optimizing the online shopping interface.',
                'project_maybelline_lazmall_skills': 'E-commerce Design, Key Visual',
                'project_coffee_illustration_title': 'Coffee Processing Illustration - Soul Specialty Coffee',
                'project_coffee_illustration_desc': 'Created a unique set of illustrations about the coffee processing journey for Soul Specialty Coffee, telling the story from bean to cup.',
                'project_coffee_illustration_skills': 'Illustration, Branding, Packaging',
                'project_details_link': 'View project details &rarr;',
                'services_heading': 'Services Offered',
                // Updated service keys
                'service_fooh_title': 'Video CGI FOOH Production',
                'service_fooh_desc': 'Production of short CGI advertising videos (15-30 seconds) for media campaigns.',
                'service_3d_modeling_animation_title': '3D Modeling & Animation',
                'service_3d_modeling_animation_desc1': 'Detailed 3D product modeling from drawings or concepts.',
                'service_3d_modeling_animation_desc2': 'High-quality, photorealistic 3D product rendering.',
                'service_3d_modeling_animation_desc3': 'Production of 3D CGI advertising videos for products.',
                'service_2d_design_title': '2D Design',
                'service_2d_design_desc1': 'Design for e-commerce platforms.',
                'service_2d_design_desc2': 'Product packaging design.',
                'service_2d_design_desc3': 'POSM Design.',
                'service_2d_design_desc4': 'Other 2D design services as required.',
                'contact_heading': 'Contact',
                'contact_tagline': 'Ready to bring your ideas to life? Send me a message!',
                'contact_name_label': 'Your Name:',
                'contact_name_placeholder': 'Your Name',
                'contact_email_label': 'Your Email:',
                'contact_email_placeholder': 'Your Email',
                'contact_subject_label': 'Subject:',
                'contact_subject_placeholder': 'Subject',
                'contact_message_label': 'Message:',
                'contact_message_placeholder': 'Message',
                'contact_submit_button': 'Send Message',
                'contact_form_success': 'Thank you for your message! It has been sent.',
                'contact_or_connect': 'Or connect via:',
                'contact_location': 'Location: Ho Chi Minh City, Vietnam'
            }
        };

        // Centralized project data for easy updates
        const portfolioProjects = [
            {
                id: 'maybelline-lifter-gloss',
                title_key: 'project_maybelline_lifter_title',
                desc_key: 'project_maybelline_lifter_desc',
                skills_key: 'project_maybelline_lifter_skills',
                behance_link: 'https://www.behance.net/gallery/224918323/Maybelline-LIFTER-GLOSS-POSM-Digital-Design',
                images: [
                    'https://placehold.co/600x400/3b82f6/ffffff?text=Maybelline+1',
                    'https://placehold.co/600x400/2563eb/ffffff?text=Maybelline+2',
                    'https://placehold.co/600x400/1d4ed8/ffffff?text=Maybelline+3'
                ]
            },
            {
                id: 'cgi-fooh-videos',
                title_key: 'project_cgi_fooh_title',
                desc_key: 'project_cgi_fooh_desc',
                skills_key: 'project_cgi_fooh_skills',
                behance_link: 'https://www.behance.net/gallery/217807677/2024-CGI-Fake-OOH-videos-collection',
                images: [
                    'https://placehold.co/600x400/60a5fa/ffffff?text=FOOH+1',
                    'https://placehold.co/600x400/94a3b8/ffffff?text=FOOH+2',
                    'https://placehold.co/600x400/64748b/ffffff?text=FOOH+3'
                ]
            },
            {
                id: 'dove-tvc',
                title_key: 'project_dove_tvc_title',
                desc_key: 'project_dove_tvc_desc',
                skills_key: 'project_dove_tvc_skills',
                behance_link: 'https://www.behance.net/gallery/210560855/Dove-Deodorant-Night-serum-Product-TVC',
                images: [
                    'https://placehold.co/600x400/22c55e/ffffff?text=Dove+1',
                    'https://placehold.co/600x400/16a34a/ffffff?text=Dove+2',
                    'https://placehold.co/600x400/3b82f6/ffffff?text=Dove+3'
                ]
            },
            {
                id: 'aeon-tet',
                title_key: 'project_aeon_tet_title',
                desc_key: 'project_aeon_tet_desc',
                skills_key: 'project_aeon_tet_skills',
                behance_link: 'https://www.behance.net/gallery/221012599/Tt-chn-Aeon-Tt-Vui-trn-vn',
                images: [
                    'https://placehold.co/600x400/3b82f6/ffffff?text=Aeon+1',
                    'https://placehold.co/600x400/2563eb/ffffff?text=Aeon+2',
                    'https://placehold.co/600x400/1d4ed8/ffffff?text=Aeon+3'
                ]
            },
            {
                id: 'maybelline-lazmall',
                title_key: 'project_maybelline_lazmall_title',
                desc_key: 'project_maybelline_lazmall_desc',
                skills_key: 'project_maybelline_lazmall_skills',
                behance_link: 'https://www.behance.net/gallery/170566929/MAYBELLINE-LAZMALL-BSL-KEY-VISUAL-SHOP-IN-SHOP',
                images: [
                    'https://placehold.co/600x400/60a5fa/ffffff?text=LazMall+1',
                    'https://placehold.co/600x400/94a3b8/ffffff?text=LazMall+2',
                    'https://placehold.co/600x400/64748b/ffffff?text=LazMall+3'
                ]
            },
            {
                id: 'coffee-illustration',
                title_key: 'project_coffee_illustration_title',
                desc_key: 'project_coffee_illustration_desc',
                skills_key: 'project_coffee_illustration_skills',
                behance_link: 'https://www.behance.net/gallery/143434651/Coffee-processing-illustration-Soul-specialty-coffee',
                images: [
                    'https://placehold.co/600x400/22c55e/ffffff?text=Coffee+1',
                    'https://placehold.co/600x400/16a34a/ffffff?text=Coffee+2',
                    'https://placehold.co/600x400/3b82f6/ffffff?text=Coffee+3'
                ]
            }
        ];

        let currentLanguage = localStorage.getItem('lang') || 'vi'; // Default to Vietnamese

        // Function to update content based on selected language
        function updateContent(lang) {
            const elements = document.querySelectorAll('[data-lang-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (languages[lang][key]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        el.placeholder = languages[lang][key];
                    } else if (el.tagName === 'TITLE') {
                        document.title = languages[lang][key];
                    } else {
                        // For elements that might contain HTML (like strong tags)
                        el.innerHTML = languages[lang][key];
                    }
                }
            });

            // Update dynamically loaded project content
            portfolioProjects.forEach(project => {
                const projectCard = document.getElementById(`project-card-${project.id}`);
                if (projectCard) {
                    projectCard.querySelector('.project-title').textContent = languages[lang][project.title_key];
                    projectCard.querySelector('.project-description').textContent = languages[lang][project.desc_key];
                    
                    const skillsContainer = projectCard.querySelector('.project-skills-container');
                    skillsContainer.innerHTML = ''; // Clear existing skills
                    
                    // Filter out unwanted skills
                    const skillsToExclude = ['Marketing', 'UI/UX', 'Digital Marketing']; // Added 'Digital Marketing'
                    const allSkills = languages[lang][project.skills_key].split(', ').map(skill => skill.trim());
                    const filteredSkills = allSkills.filter(skill => !skillsToExclude.includes(skill));

                    filteredSkills.forEach(skill => {
                        const span = document.createElement('span');
                        span.classList.add('skill-tag');
                        span.textContent = skill;
                        skillsContainer.appendChild(span);
                    });
                }
            });

            document.documentElement.lang = lang; // Update HTML lang attribute
            const langButton = document.getElementById('lang-toggle-button');
            if (langButton) {
                langButton.textContent = lang.toUpperCase() === 'VI' ? 'EN' : 'VI'; // Update button text
            }
            localStorage.setItem('lang', lang); // Save preference
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Language toggle functionality
        const langToggleButton = document.getElementById('lang-toggle-button');
        langToggleButton.addEventListener('click', () => {
            currentLanguage = currentLanguage === 'vi' ? 'en' : 'vi';
            updateContent(currentLanguage);
        });

        // Theme toggle functionality
        const themeToggleCheckbox = document.getElementById('theme-toggle-checkbox');
        let currentTheme = localStorage.getItem('theme') || 'dark'; // Default to dark

        function applyTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            themeToggleCheckbox.checked = (theme === 'light'); // Set checkbox state
            localStorage.setItem('theme', theme);
        }

        themeToggleCheckbox.addEventListener('change', () => {
            currentTheme = themeToggleCheckbox.checked ? 'light' : 'dark';
            applyTheme(currentTheme);
        });

        // Scroll reveal animation
        const scrollRevealElements = document.querySelectorAll('.scroll-reveal, .scroll-reveal-x');

        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1 /* Element is 10% visible */
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Only unobserve if you want the animation to happen once
                    // If you want it to re-animate on scroll up/down, remove this line.
                    // For a portfolio, usually animating once is fine.
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        scrollRevealElements.forEach(el => observer.observe(el));

        // Function to create and append portfolio cards
        function createPortfolioCards() {
            const portfolioGrid = document.getElementById('portfolio-grid');
            if (!portfolioGrid) return;

            portfolioGrid.innerHTML = ''; // Clear existing content

            portfolioProjects.forEach((project, index) => {
                const card = document.createElement('div');
                card.id = `project-card-${project.id}`;
                card.classList.add('group', 'relative', 'overflow-hidden', 'rounded-xl', 'shadow-xl', 'bg-card', 'transform', 'transition', 'duration-500', 'hover:scale-105', 'hover:shadow-2xl', 'scroll-reveal');
                card.style.transitionDelay = `${index * 100}ms`; // Stagger animation

                // Image thumbnail container
                const thumbnailContainer = document.createElement('div');
                thumbnailContainer.classList.add('project-thumbnail-container');

                // Images for thumbnail carousel
                project.images.forEach((imgSrc, imgIndex) => {
                    const img = document.createElement('img');
                    img.src = imgSrc;
                    img.onerror = function() { this.onerror=null; this.src='https://placehold.co/600x400/1e293b/f8fafc?text=Project+Image'; };
                    img.alt = `Project Image ${imgIndex + 1}`;
                    img.classList.add('project-thumbnail-image');
                    if (imgIndex === 0) {
                        img.classList.add('active'); // First image active by default
                    }
                    thumbnailContainer.appendChild(img);
                });

                // Thumbnail indicators
                const indicatorsContainer = document.createElement('div');
                indicatorsContainer.classList.add('thumbnail-indicators');
                project.images.forEach((_, imgIndex) => {
                    const indicator = document.createElement('span');
                    if (imgIndex === 0) {
                        indicator.classList.add('active');
                    }
                    indicatorsContainer.appendChild(indicator);
                });
                if (project.images.length > 1) { // Only show indicators if there's more than one image
                    thumbnailContainer.appendChild(indicatorsContainer);
                }

                // Auto-slide and hover logic for thumbnails
                let currentImageIndex = 0;
                let autoSlideInterval;
                let hoverInterval; // For faster cycling on hover

                function updateThumbnailDisplay() {
                    const images = thumbnailContainer.querySelectorAll('.project-thumbnail-image');
                    const indicators = thumbnailContainer.querySelectorAll('.thumbnail-indicators span');
                    images.forEach((img, idx) => {
                        img.classList.toggle('active', idx === currentImageIndex);
                    });
                    indicators.forEach((ind, idx) => {
                        ind.classList.toggle('active', idx === currentImageIndex);
                    });
                }

                function startAutoSlide() {
                    stopAutoSlide(); // Clear any existing auto-slide
                    if (project.images.length > 1) { // Only auto-slide if more than one image
                        autoSlideInterval = setInterval(() => {
                            currentImageIndex = (currentImageIndex + 1) % project.images.length;
                            updateThumbnailDisplay();
                        }, 3000); // Auto-slide every 3 seconds
                    }
                }

                function stopAutoSlide() {
                    if (autoSlideInterval) {
                        clearInterval(autoSlideInterval);
                        autoSlideInterval = null;
                    }
                }

                // Initial start of auto-slide
                startAutoSlide();

                thumbnailContainer.addEventListener('mouseenter', () => {
                    stopAutoSlide(); // Stop auto-slide on hover
                    if (project.images.length > 1) {
                        hoverInterval = setInterval(() => {
                            currentImageIndex = (currentImageIndex + 1) % project.images.length;
                            updateThumbnailDisplay();
                        }, 800); // Faster change every 0.8s on hover
                    }
                });

                thumbnailContainer.addEventListener('mouseleave', () => {
                    if (hoverInterval) {
                        clearInterval(hoverInterval); // Clear hover interval
                    }
                    currentImageIndex = 0; // Reset to first image on mouse leave
                    updateThumbnailDisplay(); // Show first image immediately
                    startAutoSlide(); // Restart auto-slide
                });

                // Content Div
                const contentDiv = document.createElement('div');
                // Increased padding-bottom to avoid overlap with the absolute button
                contentDiv.classList.add('px-6', 'pt-6', 'pb-16', 'text-left'); 

                const title = document.createElement('h3');
                title.classList.add('text-2xl', 'font-bold', 'text-main', 'mb-2', 'project-title');
                title.setAttribute('data-lang-key', project.title_key);

                const description = document.createElement('p');
                description.classList.add('text-gray-normal', 'text-sm', 'mb-4', 'project-description');
                description.setAttribute('data-lang-key', project.desc_key);

                const skillsContainer = document.createElement('div');
                skillsContainer.classList.add('flex', 'flex-wrap', 'items-center', 'gap-2', 'mb-4', 'project-skills-container');
                skillsContainer.setAttribute('data-lang-key', project.skills_key);

                // "Xem chi tiết dự án" button, now positioned absolutely within the card
                const linkButton = document.createElement('a');
                linkButton.href = project.behance_link;
                linkButton.target = '_blank';
                linkButton.rel = 'noopener noreferrer';
                linkButton.classList.add('bg-primary-button', 'hover:bg-primary-button', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'shadow-md', 'transition', 'duration-300', 'transform', 'hover:scale-105', 'text-sm', 'project-details-link-button'); // Added new class for positioning
                linkButton.setAttribute('data-lang-key', 'project_details_link');

                contentDiv.appendChild(title);
                contentDiv.appendChild(description);
                contentDiv.appendChild(skillsContainer);
                card.appendChild(thumbnailContainer); // Add thumbnail container first
                card.appendChild(contentDiv);
                card.appendChild(linkButton); // Add button directly to card for absolute positioning

                portfolioGrid.appendChild(card);
            });
        }

        // This function runs when the window finishes loading
        window.onload = function() {
            const header = document.querySelector('header');
            // Set body's padding-top to push all content down below the fixed header
            const headerHeight = header.offsetHeight;
            document.body.style.paddingTop = `-${headerHeight}px`;

            const heroTextContent = document.getElementById('hero-text-content');
            const parallaxSpeed = 0.2; // Adjust this value for more/less parallax

            function handleHeroParallax() {
                const scrollY = window.scrollY;
                heroTextContent.style.transform = `translateY(${scrollY * parallaxSpeed}px)`;
            }

            window.addEventListener('scroll', handleHeroParallax);
            handleHeroParallax(); // Call initially to set correct position

            // Create portfolio cards dynamically
            createPortfolioCards();

            // Initialize language and theme toggles
            updateContent(currentLanguage);
            applyTheme(currentTheme);


            // Mobile Toggle Logic (New) - Re-apply after header is loaded
            const mobileToggle = document.getElementById('mobile-toggle');
            const toggleIcon = mobileToggle.querySelector('i.fa-solid'); // Get the specific icon element
            const navMenuLinks = mobileToggle.querySelectorAll('.menu-item a'); // All links within the mobile menu

            // Function to set toggle state
            function setToggleState(isExpanded) {
                if (isExpanded) {
                    mobileToggle.classList.remove('collapsed');
                    mobileToggle.classList.add('expanded');
                } else {
                    mobileToggle.classList.remove('expanded');
                    mobileToggle.classList.add('collapsed');
                }
            }

            // Initialize mobile toggle to collapsed state on page load
            // Only apply this logic if the screen is considered mobile (max-width: 767px)
            if (window.innerWidth <= 767) {
                setToggleState(false); // Start collapsed
            } else {
                mobileToggle.classList.remove('collapsed', 'expanded'); // Ensure no mobile classes on desktop
            }

            // Click listener for the toggle icon itself
            toggleIcon.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent event bubbling up to the mobileToggle div's listener if it existed
                setToggleState(!mobileToggle.classList.contains('expanded')); // Toggle current state
            });

            // Click listener for the overall mobileToggle div (for clicks on the half-circle area but not the icon or menu items)
            mobileToggle.addEventListener('click', (e) => {
                // If the click is directly on the mobileToggle div and not on a menu item or the toggle icon itself
                if (e.target === mobileToggle) {
                    setToggleState(!mobileToggle.classList.contains('expanded')); // Toggle current state
                }
            });

            // Click listener for each navigation link within the mobile menu
            navMenuLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    // Ensure the smooth scroll happens first
                    e.preventDefault(); // Temporarily prevent default to allow custom logic
                    const targetId = link.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }

                    // Collapse the menu after smooth scroll (or immediately if not scrolling)
                    if (mobileToggle.classList.contains('expanded')) {
                        setToggleState(false); // Collapse
                    }
                });
            });

            // Adjust header padding for logo visibility on mobile when toggle is collapsed
            const headerNav = document.querySelector('header nav');
            function adjustHeaderPadding() {
                if (window.innerWidth <= 767) {
                    headerNav.style.paddingLeft = '0'; /* Removed the 44px padding */
                } else {
                    headerNav.style.paddingLeft = '0';
                }
            }
            // Call on load and resize
            adjustHeaderPadding();
            window.addEventListener('resize', adjustHeaderPadding);
        };

        // Project images mapping for services with captions (existing services data)
        const projectMapping = {
            'service-fooh': [
                { src: 'https://placehold.co/800x450/3b82f6/ffffff?text=FOOH+Project+1', caption: 'Dự án CGI FOOH - Concept 1' },
                { src: 'https://placehold.co/800x450/2563eb/ffffff?text=FOOH+Project+2', caption: 'Dự án CGI FOOH - Concept 2' },
                { src: 'https://placehold.co/800x450/1d4ed8/ffffff?text=FOOH+Project+3', caption: 'Dự án CGI FOOH - Concept 3' }
            ],
            'service-3d-modeling-animation': [
                { src: 'https://placehold.co/800x450/1d4ed8/ffffff?text=3D+Product+A', caption: 'Mô hình 3D sản phẩm cao cấp A' },
                { src: 'https://placehold.co/800x450/1d4ed8/ffffff?text=3D+Product+B', caption: 'Hoạt hình 3D sản phẩm B' },
                { src: 'https://placehold.co/800x450/1d4ed8/ffffff?text=3D+Product+C', caption: 'Render chân thực sản phẩm C' }
            ],
            'service-2d-design': [
                { src: 'https://placehold.co/800x450/60a5fa/ffffff?text=2D+Ecommerce+X', caption: 'Thiết kế E-commerce cho cửa hàng X' },
                { src: 'https://placehold.co/800x450/60a5fa/ffffff?text=2D+Packaging+Y', caption: 'Thiết kế bao bì sản phẩm Y' },
                { src: 'https://placehold.co/800x450/60a5fa/ffffff?text=2D+POSM+Z', caption: 'Thiết kế POSM cho chiến dịch Z' }
            ]
        };

        let activeServiceId = null;
        let autoSlideInterval;
        let currentProjectIndex = 0;


        const servicesCardsContainer = document.getElementById('services-cards-container');

        document.querySelectorAll('.toggle-details').forEach(button => {
            button.addEventListener('click', function() {
                const serviceId = this.dataset.serviceId;
                toggleServiceDetails(serviceId);
            });
        });

        function loadCarousel(serviceId, cardElement) {
            const carouselInner = cardElement.querySelector('.carousel-inner');
            let carouselIndicatorsContainer = cardElement.querySelector('.carousel-indicators');

            carouselInner.innerHTML = '';
            carouselIndicatorsContainer.innerHTML = '';

            const projects = projectMapping[serviceId];
            if (projects && projects.length > 0) {
                projects.forEach((project, index) => {
                    const item = document.createElement('div');
                    item.classList.add('carousel-item');
                    const img = document.createElement('img');
                    img.src = project.src;
                    img.alt = project.caption;
                    item.appendChild(img);
                    carouselInner.appendChild(item);

                    const indicator = document.createElement('span');
                    indicator.classList.add('w-3', 'h-3', 'bg-gray-400', 'rounded-full', 'cursor-pointer', 'transition-colors', 'duration-300');
                    indicator.dataset.index = index;
                    indicator.addEventListener('click', () => {
                        currentProjectIndex = index;
                        updateCarouselDisplay(cardElement);
                        resetAutoSlide(cardElement);
                    });
                    carouselIndicatorsContainer.appendChild(indicator);
                });
                currentProjectIndex = 0;
                updateCarouselDisplay(cardElement);

                const projectCarouselWrapper = cardElement.querySelector('.project-carousel-wrapper');
                projectCarouselWrapper.removeEventListener('mousemove', handleCarouselMouseMove);
                projectCarouselWrapper.removeEventListener('mouseleave', handleCarouselMouseLeave);

                if (window.matchMedia('(pointer: coarse)').matches || window.innerWidth < 768) {
                    startAutoSlide(cardElement);
                } else {
                    stopAutoSlide();
                    projectCarouselWrapper.addEventListener('mousemove', (e) => handleCarouselMouseMove(e, cardElement));
                    projectCarouselWrapper.addEventListener('mouseleave', (e) => handleCarouselMouseLeave(e, cardElement));
                }

            } else {
                carouselInner.innerHTML = `<p class="text-gray-medium text-center" data-lang-key="no_projects">Không có dự án mẫu nào.</p>`;
                updateContent(currentLanguage);
                stopAutoSlide();
            }
        }

        function updateCarouselDisplay(cardElement) {
            const carouselInner = cardElement.querySelector('.carousel-inner');
            const carouselIndicators = cardElement.querySelectorAll('.carousel-indicators span');

            const projects = projectMapping[cardElement.id];
            if (!projects || projects.length === 0) return;

            carouselInner.style.transform = `translateX(-${currentProjectIndex * 100}%)`;

            carouselIndicators.forEach((indicator, index) => {
                if (index === currentProjectIndex) {
                    indicator.classList.remove('bg-gray-400');
                    indicator.classList.add('bg-blue-500', 'active');
                } else {
                    indicator.classList.remove('bg-blue-500', 'active');
                    indicator.classList.add('bg-gray-400');
                }
            });
        }

        function handleCarouselMouseMove(event, cardElement) {
            const projectCarouselWrapper = cardElement.querySelector('.project-carousel-wrapper');
            const rect = projectCarouselWrapper.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const elementWidth = rect.width;
            const projects = projectMapping[cardElement.id];
            const totalProjects = projects ? projects.length : 0;

            if (totalProjects <= 1) {
                currentProjectIndex = 0;
                updateCarouselDisplay(cardElement);
                return;
            }

            const segmentWidth = elementWidth / totalProjects;
            let newIndex = Math.floor(mouseX / segmentWidth);
            newIndex = Math.max(0, Math.min(totalProjects - 1, newIndex));

            if (newIndex !== currentProjectIndex) {
                currentProjectIndex = newIndex;
                updateCarouselDisplay(cardElement);
            }
        }

        function handleCarouselMouseLeave(event, cardElement) {
            // As per previous request, no reset on mouse leave for desktop
        }

        function startAutoSlide(cardElement) {
            stopAutoSlide();
            autoSlideInterval = setInterval(() => {
                const projects = projectMapping[cardElement.id];
                if (projects && projects.length > 0) {
                    currentProjectIndex = (currentProjectIndex + 1) % projects.length;
                    updateCarouselDisplay(cardElement);
                }
            }, 3000);
        }

        function stopAutoSlide() {
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
                autoSlideInterval = null;
            }
        }

        function resetAutoSlide(cardElement) {
            if (window.matchMedia('(pointer: coarse)').matches || window.innerWidth < 768) {
                stopAutoSlide();
                startAutoSlide(cardElement);
            }
        }

        function toggleServiceDetails(serviceId) {
            const allServiceCards = document.querySelectorAll('.service-card');
            const clickedCard = document.getElementById(serviceId);
            const clickedIcon = clickedCard.querySelector('.toggle-details i');
            const projectCarouselWrapper = clickedCard.querySelector('.project-carousel-wrapper');

            const isCurrentlyExpanded = clickedCard.classList.contains('expanded');

            // Reset all cards and container to their default collapsed state (3-column grid)
            allServiceCards.forEach(card => {
                card.classList.remove('expanded', 'hidden-by-expansion'); // Remove all state classes
                card.querySelector('.toggle-details i').classList.replace('fa-times', 'fa-plus'); // Reset icon
                // Ensure carousel wrapper is hidden for all cards
                const pcw = card.querySelector('.project-carousel-wrapper');
                if (pcw) {
                    pcw.classList.remove('carousel-visible'); // Remove carousel visible class
                }
            });
            servicesCardsContainer.classList.remove('services-expanded'); // Reset container layout

            stopAutoSlide(); // Stop auto-slide for any previous active card

            if (isCurrentlyExpanded) {
                // If clicked card was expanded, we just collapsed it.
                // The reset above already handled the collapse. So we just exit.
                activeServiceId = null;
                return;
            }

            // If the clicked card was not expanded, we will expand it.
            clickedCard.classList.add('expanded'); // Mark clicked card as expanded
            clickedIcon.classList.replace('fa-plus', 'fa-times'); // Change icon

            // Hide other cards by adding `hidden-by-expansion` class
            allServiceCards.forEach(card => {
                if (card.id !== serviceId) {
                    card.classList.add('hidden-by-expansion');
                }
            });

            // Set container to expanded state layout (flex row for desktop)
            servicesCardsContainer.classList.add('services-expanded');

            // Ensure the active card's project carousel is visible
            projectCarouselWrapper.classList.add('carousel-visible'); // Add the new class

            // Load and display projects for the active service
            loadCarousel(serviceId, clickedCard);
            activeServiceId = serviceId;
        }

        // Ensure event listeners for mousemove/mouseleave are re-attached or removed on window resize
        window.addEventListener('resize', () => {
            if (activeServiceId) { // Only re-evaluate if a service is expanded
                const activeCardElement = document.getElementById(activeServiceId);
                const projectCarouselWrapper = activeCardElement.querySelector('.project-carousel-wrapper');

                if (window.matchMedia('(pointer: coarse)').matches || window.innerWidth < 768) {
                    startAutoSlide(activeCardElement);
                    projectCarouselWrapper.removeEventListener('mousemove', handleCarouselMouseMove);
                    projectCarouselWrapper.removeEventListener('mouseleave', handleCarouselMouseLeave);
                } else {
                    stopAutoSlide();
                    projectCarouselWrapper.addEventListener('mousemove', (e) => handleCarouselMouseMove(e, activeCardElement));
                    projectCarouselWrapper.removeEventListener('mouseleave', (e) => handleCarouselMouseLeave(e, activeCardElement));
                }
                updateCarouselDisplay(activeCardElement); // Update carousel position after resize
            }
        });
    </script>
</body>
</html>
